{% extends 'base.html' %}
{% load static from staticfiles %}
{% block primary %}

  <!-- Heading Row -->
  <div class="row my-4">

    <div class="col-lg-12">
      <h1>{{ car }} - lista ToDo</h1>
      <p><button type="button" class="btn btn-primary" onclick="window.location.href='{% url 'admin:journal_note_add' %}'">Dodaj</button></p>
      <table class="table table-striped small" id="todo_list">
        <thead>
            <tr>
              <th scope="col">#</th>
              <th>Tytu≈Ç</th>
              <th>Opis</th>
              <th>Pliki</th>
              <th>Przewidywany koszt</th>
              <th>Priorytet</th>
              <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for element in todo_list %}
                {% if element.todo is True %}
                    <tr>
                      <th scope="row"> {{ forloop.counter }}</th>
                      <td>{{ element.title }}</td>
                      <td>{{ element.desc }}</td>
                      {% if element.attachement %}
                        <td><a href="{% url 'get_file' element.attachement.id %}">{{ element.attachement.name }}</a></td>
                      {% else %}
                        <td>-</td>
                      {% endif %}
                      <td>{{ element.cost }}</td>
                      <td>{{ element.todo_priority }}</td>
                      {% if element.todo_done is True %}
                        <td><span class="badge badge-success">zrobione</span></td>
                      {% else %}
                        <td><span class="badge badge-danger">nie zrobione</span></td>
                      {% endif %}
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
      </table>
      <script>$(document).ready( function () {
                    $('#todo_list').DataTable();
                  } );
      </script>


    </div>

  </div>
  <!-- /.row -->
{% endblock %}
